<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>On Endometriosis</title>
  <link rel="stylesheet" href="src/css/reset.css">
  <link rel="stylesheet" href="src/css/normalize.css">
  <link rel="stylesheet" href="src/css/main.css">
  <script src="https://unpkg.com/@phosphor-icons/web@2.1.1"></script>
</head>
<body>
  <main class="container">
    <!-- Hero Section (Kept unchanged) -->
    <section class="hero">
      <h1 class="intro-title">Endometriosis</h1>
      <p>A focus on the medical condition that affects millions of women worldwide.</p>
      <p class="tiny">By 
        <a href="https://trangs.website" target="_blank" rel="noopener noreferrer">Trang Vu</a> 
        &amp; 
        <a href="#" target="_blank" rel="noopener noreferrer">Patrícia Gogová</a>
      </p>
    </section>

    <!-- ✅ Updated Intro Section with Grid Layout -->
    <section class="intro">
      <div class="grid-container">
        <h2 class="grid-title">What is Endometriosis?</h2>
        <div class="grid-text">
          <!-- <p class="intro-desc">
            <q>Huh. Endo-what?</q>
          </p>
          <p class="intro-desc">
            <q>Endometriosis.</q>
          </p> -->
          <p>
            Endometriosis is a chronic, inflammatory disease that affects women and can cause debilitating pelvic and period pain, as well as infertility. 
            It also affects parts of the body beyond the pelvic area.
          </p>
          <p>
            Endometriosis occurs when tissue similar to that found in the endometrium—the lining of the uterus—grows outside the uterus.
          </p>
          <p>
            This misplaced tissue typically develops on the ovaries, fallopian tubes, and the tissue lining the pelvis, though in rare cases it can spread beyond the pelvic region.
          </p>
        </div>
        <div class="grid-other">
          <img src="src/img/female reproductive system.svg" alt="Diagram explaining Endometriosis">
        </div>
      </div>
      
    </section>

    <!-- ✅ Communication Section -->
    <section id="communication">
        <div class="grid-container">
          <h2 class="grid-title">Communication</h2>
          <div class="grid-text">
            <p>
              Words are powerful. They can comfort, inspire, or unintentionally hurt. For women living with endometriosis, respectful and compassionate communication can provide a sense of comfort and belonging. 
              It is not about saying the perfect thing but about showing that we care and are willing to understand their journey.
            </p>
          </div>
          <div class="grid-other">
            <div class="communication">
              <!-- 1st row -->
              <div class="card success">
                <span class="badge"><i class="ph ph-check"></i>Do</span>
                <span class="title">Use respectful and accurate terms</span>
                <span class="desc">
                  Refer to endometriosis as a ‘condition’, not a ‘disease’ to avoid negative connotations.
                </span>
                <span class="example">
                  <q>Living with this condition must require a lot of resilience.</q>
                </span>
              </div>
              <div class="card error">
                <span class="badge"><i class="ph ph-x"></i>Don't</span>
                <span class="title">Do not dismiss their pain</span>
                <span class="desc">
                  Downplaying their experience invalidates their reality.
                </span>
                <span class="example">
                  <q>Avoid saying ‘Everyone has bad periods - it’s normal.’</q>
                </span>
              </div>
      
              <!-- 2nd row -->
              <div class="card success">
                <span class="badge"><i class="ph ph-check"></i>Do</span>
                <span class="title">Validate feelings and experiences</span>
                <span class="desc">
                  Acknowledge the challenges they face with empathy.
                </span>
                <span class="example">
                  <q>Going through this sounds challenging, and I admire your strength.</q>
                </span>
              </div>
              <div class="card error">
                <span class="badge"><i class="ph ph-x"></i>Don't</span>
                <span class="title">Do not imply they are overreacting</span>
                <span class="desc">
                  It suggests they are exaggerating, which can feel dismissive.
                </span>
                <span class="example">
                  <q>Avoid saying ‘Are you sure it’s that serious?’</q>
                </span>
              </div>
      
              <!-- 3rd row -->
              <div class="card success">
                <span class="badge"><i class="ph ph-check"></i>Do</span>
                <span class="title">Respect their boundaries</span>
                <span class="desc">
                  Encourage open communication while respecting privacy.
                </span>
                <span class="example">
                  <q>Let me know if there’s anything you feel comfortable sharing about your condition.</q>
                </span>
              </div>
              <div class="card error">
                <span class="badge"><i class="ph ph-x"></i>Don't</span>
                <span class="title">Do not push solutions</span>
                <span class="desc">
                  It can come across as trivializing a serious condition.
                </span>
                <span class="example">
                  <q>Avoid saying ‘Have you tried yoga or herbal remedies?’</q>
                </span>
              </div>
      
              <!-- 4th row -->
              <div class="card success">
                <span class="badge"><i class="ph ph-check"></i>Do</span>
                <span class="title">Educate yourself</span>
                <span class="desc">
                  Demonstrate initiative to learn and be supportive.
                </span>
                <span class="example">
                  <q>I've read about endometriosis. I'd like to understand more about how it affects you, if you are comfortable sharing.</q>
                </span>
              </div>
              <div class="card error">
                <span class="badge"><i class="ph ph-x"></i>Don't</span>
                <span class="title">Do not be overly pitying</span>
                <span class="desc">
                  It can feel patronizing and diminish their sense of agency.
                </span>
                <span class="example">
                  <q>Avoid saying ‘I feel so sorry for you - it must be terrible.’</q>
                </span>
              </div>
      
              <!-- 5th row -->
              <div class="card success">
                <span class="badge"><i class="ph ph-check"></i>Do</span>
                <span class="title">Offer practical help</span>
                <span class="desc">
                  Show care and compassion for the person.
                </span>
                <span class="example">
                  <q>Can I help you with anything? Just let me know.</q>
                </span>
              </div>
              <div class="card error">
                <span class="badge"><i class="ph ph-x"></i>Don't</span>
                <span class="title">Do not blame them for their condition</span>
                <span class="desc">
                  It places unnecessary guilt and responsibility on them.
                </span>
                <span class="example">
                  <q>Avoid saying ‘Maybe if you exercised more, it would get better.’</q>
                </span>
              </div>
            </div>
          </div>
        </div>
      </section>
      

    <!-- ✅ Diagnosis Section -->
    <section id="diagnosis">
      <div class="grid-container">
        <h2 class="grid-title">Diagnosis</h2>
        <div class="grid-text">
          <p>
            Diagnosis often starts with a review of medical history, focusing on symptoms, risk factors, and difficulties with pregnancy. Your doctor may ask about period-related issues like pain, cycle length, and whether pelvic pain worsens during menstruation.
          </p>
          <p>
            Imaging tests like ultrasounds or MRIs may be ordered to examine pelvic tissues. Based on medical history, physical exam findings, and imaging, a clinical diagnosis might be made to start treatment promptly without surgery. Medications like hormonal contraceptives or pain relievers are often prescribed at this stage.
          </p>
        </div>
        <div class="grid-other">
          <div class="img-container">
            <img src="src/img/diagnosis.png" alt="A comic of a doctor asking Do you have painful periods">
          </div>
        </div>
      </div>
    </section>

    <!-- ✅ Symptoms Section -->
    <section id="symptoms">
      <div class="grid-container">
        <h2 class="grid-title">Symptoms</h2>
        <div class="grid-text">
          <p>
            Endometriosis symptoms vary widely, with some experiencing severe pain while others have mild or no symptoms. 
            Common symptoms include intense menstrual cramps, chronic pelvic pain, and pain during or after sex.
          </p>
        </div>
        <div class="grid-other">
          <img src="src/img/symptoms.png" alt="Endometriosis symptoms illustration">
        </div>
      </div>
    </section>

    <!-- ✅ Treatment Section -->
    <section id="treatment">
      <div class="grid-container">
        <h2 class="grid-title">Treatment</h2>
        <div class="grid-text">
          <p>
            While there is no cure for endometriosis, treatments aim to manage pain and slow disease progression. 
            Options include pain relievers, hormone therapy, and in severe cases, surgery to remove endometrial growths.
          </p>
        </div>
        <div class="grid-other">
          <img src="src/img/treatment.png" alt="Endometriosis treatment options">
        </div>
      </div>
    </section>

    <!-- ✅ Challenges and Priorities Section -->
    <section id="challenges">
      <div class="grid-container">
        <h2 class="grid-title">Challenges and Priorities</h2>
        <div class="grid-text">
          <p>
            Many individuals face difficulties getting diagnosed, dealing with long-term pain, and navigating the impact of endometriosis on fertility and mental health. 
            Awareness and better healthcare access are crucial to improving outcomes.
          </p>
        </div>
        <div class="grid-other">
          <img src="src/img/challenges.png" alt="Endometriosis challenges infographic">
        </div>
      </div>
    </section>
  </main>

  <footer>
      <p>Made with passion for data magic and storytelling.</p>
  </footer>

    <!-- GSAP and ScrollTrigger -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

<script>
  gsap.registerPlugin(ScrollTrigger);

  // Opacity effect for <p> elements (works per paragraph)
  gsap.utils.toArray("section p").forEach((p) => {
    gsap.fromTo(
      p,
      { opacity: 0.1 },
      { 
        opacity: 1, 
        duration: 0.8, 
        ease: "power2.out",
        scrollTrigger: {
          trigger: p,
          start: "top 80%", // When the paragraph is 20% into the viewport
          end: "top 20%",   // Ends when it reaches halfway through the viewport
          toggleActions: "play reverse play reverse" // Fades in and out on scroll
        }
      }
    );
  });

  // Opacity effect for images (based on section visibility)
  gsap.utils.toArray("section").forEach((section) => {
    const img = section.querySelector("img");
    if (img) {
      gsap.fromTo(
        img,
        { opacity: 0.1 },
        { 
          opacity: 1, 
          duration: 0, 
          ease: "linear",
          scrollTrigger: {
            trigger: section,
            start: "top 80%", // Image fades in when the section enters the viewport
            end: "bottom 80%", // Image fades out when the section starts leaving
            toggleActions: "play reverse play reverse" // Fades in and out when scrolling
          }
        }
      );
    }
  });


  // Array of translated background colors
  const sectionColors = [
    "#1a4c3f",
    "#28170f", // Espresso (Dark Brown)
    "#063488", // Ocean (Deep Blue)
    "#987e48", // Biscuit (Warm Beige)
    "#658f5b",
    "#4C585B",
    "#4B5945",
  ];

    // ✅ Ensure the first background color applies immediately on page load
  document.body.style.backgroundColor = sectionColors[0];

// Apply ScrollTrigger to each section
gsap.utils.toArray("section").forEach((section, index) => {
  ScrollTrigger.create({
    trigger: section,
    start: "top 50%", // Background changes when section is halfway in view
    end: "bottom 50%", // Ensures smooth transition
    onEnter: () => gsap.to("body", { backgroundColor: sectionColors[index], duration: 1.2, ease: "power2.out" }),
    onEnterBack: () => gsap.to("body", { backgroundColor: sectionColors[index], duration: 1.2, ease: "power2.out" }),
  });
});

// Updated script for true sequential paragraph reveal
document.addEventListener('DOMContentLoaded', function() {
  // Register GSAP plugins
  gsap.registerPlugin(ScrollTrigger);
  
  // Get the image container and the original image
  const introSection = document.querySelector('.intro');
  const imageContainer = document.querySelector('.intro .grid-other');
  const originalImage = imageContainer.querySelector('img');
  
  // Create a second image that will replace the first one
  const secondImage = document.createElement('img');
  secondImage.src = 'src/img/endometriosis-lesions.svg'; // Your second image
  secondImage.alt = 'Endometriosis lesions illustration';
  secondImage.style.opacity = 0; // Start invisible
  imageContainer.appendChild(secondImage);
  
  // Get all paragraphs in the intro section
  const paragraphs = document.querySelectorAll('.intro .grid-text p');
  
  // Initially hide all paragraphs except the first one
  gsap.set(paragraphs, { autoAlpha: 0, y: 20 });
  gsap.set(paragraphs[0], { autoAlpha: 1, y: 0 }); // First paragraph visible by default
  
  // Make the image container sticky
  ScrollTrigger.create({
    trigger: introSection,
    start: 'top 20%',
    end: 'bottom 80%',
    pin: imageContainer,
    pinSpacing: false,
    markers: false // Set to true for debugging
  });
  
  // Create a sequential timeline for paragraphs
  const tl = gsap.timeline({
    scrollTrigger: {
      trigger: introSection,
      start: 'top 20%',
      end: 'bottom 60%',
      scrub: true,
      markers: false // Set to true for debugging
    }
  });
  
  // Add each paragraph to the timeline with appropriate spacing
  paragraphs.forEach((paragraph, index) => {
    if (index > 0) { // Skip the first paragraph (already visible)
      tl.to(paragraph, { 
        autoAlpha: 1, 
        y: 0,
        duration: 0.3
      });
      
      // If this is paragraph index 1, trigger the image swap
      if (index === 1) {
        tl.to(secondImage, { 
          opacity: 1, 
          duration: 0.3 
        }, "<");
      }
      
      // Add a pause after each paragraph reveal
      tl.to({}, { duration: 0.5 });
      
      // Slightly dim previous paragraphs as new ones appear
      if (index > 0) {
        tl.to(paragraphs.slice(0, index), { 
          autoAlpha: 0.7, 
          duration: 0.2 
        }, "<");
      }
    }
  });
  
  // Background color transitions remain as they are
  
  // Optional: Add a subtle scale effect to the images
  gsap.fromTo(
    [originalImage, secondImage],
    { scale: 1 },
    {
      scale: 1.05,
      ease: "none",
      scrollTrigger: {
        trigger: introSection,
        start: "top bottom",
        end: "bottom top",
        scrub: true
      }
    }
  );
  
  // Add style to make sure paragraphs have enough space between them
  paragraphs.forEach(p => {
    p.style.marginBottom = "30vh";
    p.style.position = "relative";
  });
  
  // Make sure the text container has enough space
  const textContainer = document.querySelector('.intro .grid-text');
  if (textContainer) {
    textContainer.style.paddingBottom = "40vh";
  }
});
</script>




</body>
</html>
